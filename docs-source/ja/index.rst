=======================================
THRotator ユーザーマニュアル
=======================================

THRotatorは、主に上海アリス幻樂団の弾幕系シューティングである東方Projectを縦長のスクリーンで楽しむため、
画面の回転、HUDの各要素を再配置できるようにしたツールです。
東方Projectと同じエンジンを使っている呑んべぇ会の黄昏酒場にも対応しています。

ほかのDirect3D 8、Direct3D 9を使った縦スクロールシューティングゲームにも使える可能性があります。

その他のゲーム(萃夢想、緋想天、非想天則を含む)は動作確認を行っておりません。
動作確認はWindows 10のみで行っています。 

対応作品
=======================================

- 東方紅魔郷
- 東方妖々夢
- 東方永夜抄
- 東方花映塚 (画面回転のみ)
- 東方文花帖
- 東方風神録
- 東方地霊殿
- 東方星蓮船
- ダブルスポイラー
- 妖精大戦争
- 東方神霊廟
- 東方輝針城 (体験版のみ確認)
- 弾幕アマノジャク
- 東方紺珠伝 (体験版のみ確認)
- 黄昏酒場

主な機能
=======================================

- ゲーム起動中にAlt+左右キーで、画面をそれぞれ左回転、右回転することができます。
- さらに、ゲームプレイ状態と判定されると、プレイ領域を画面に合わせて目一杯に拡大します。
- ウィンドウモードでもウィンドウを縦長にすることができます。
- 拡大時のスコアや残機、ボムなどの表示レイアウトは、デフォルトのものが気に入らなければ各自でカスタマイズ可能です。
- 紅魔郷でもHomeキーで画面をbmpファイルに保存することができます。
- 地霊殿から神霊廟までのウィンドウモード(960x720か1280x960)時のジャギー(ピクセルのカクカク)を修正します。


注意事項
=====================

- 本ツールの使用は自己責任でお願いします。
- 本ツールについて、ゲームの配布元に問い合わせないでください。

  - ゲームの不具合を報告する際は、THRotatorをアンインストールしても再現するかどうかを確認してから、報告を行ってください。

- 本ツールはソフトウェアに仕様外の動作を行わせるツールです。 したがって、本ツールを利用して達成したスコアやリプレイは正式なものとして認められない可能性があります。 もし気になるなら、スコアアタック大会の主催者に確認したり、リプレイをアップロードする際には本ツール使用の旨をコメントを加えたりすると良いと思います。
- 本ツールに含まれている ``d3d8.dll`` と ``d3d9.dll`` は、絶対にシステムディレクトリにコピーしないでください。
- 本ツールを対応作品以外に使った時の動作は未定義です。


ライセンス
======================

本ツールはGPL v3にて公開しています。

`ソースコード (GitHub) <https://github.com/massanoori/THRotator>`_

ただし、同時に公開している設定ファイルについては、パブリックドメインです。

ソースコードからビルドを行い、独自の改造を行いたい場合の方法については、
:doc:`pages/development` をご覧ください。


開発の動機
======================

massanooriが知る限りでは、最初の東方Projectの縦画面化ツールは、
`新坂氏 <http://bygzam.seesaa.net/>`_ が開発した「真・東方縦画面化ツール」です。
THRotatorはこの影響を受けて開発された、もう1つの縦画面化ツールです。
実際、THRotatorと真・東方縦画面化ツールでは、画面回転の方法が似通ったものになっています (Alt+方向キー)。

しかしながら、THRotatorと真・東方縦画面化ツールでは、次のような違いがあります。

早期の作品のサポート
-------------------------

真・東方縦画面化ツールは、Direct3D 9で動く作品のみに対応しており、東方風神録以降のみで動作します。

THRotatorではDirect3D 9を使った作品に加え、東方紅魔郷から東方文花帖までのDirect3D 8を使った作品にも対応しています。


未来の作品のサポート
-------------------------

massanooriは真・東方縦画面化ツールの実装を拝見していませんが、
HUDの再配置はハードコーディングされているように思えます。
そのため、新しい作品で縦画面を楽しむためには、開発者の対応を待つ必要があります。

一方、THRotatorはHUDの再配置をカスタマイズすることができます。
そのため、THRotatorの開発者の対応を待たずに縦画面で楽しめるようになります。


設定の保存方法
-----------------------------------

真・東方縦画面化ツールは設定をレジストリに保存します。

一方、THRotatorは設定ファイルに設定を保存します。


パフォーマンス
---------------

パフォーマンスを計測したり、実装を拝見したわけではありませんが、
真・東方縦画面化ツールが行っているのは変換行列を上書きしているだけのように思われます。

一方、THRotatorはダミーのバックバッファからピクセルをコピーするという処理を行っており、
この処理は単に変換行列を単に上書きするだけよりも、高負荷であると思われます。


レンダリングの小綺麗さ
-------------------------

THRotatorが行っていることは、単なる矩形のコピーです。
そのため、矩形の境界付近が滑らかになりません。

真・東方縦画面化ツールは透明度を考慮してレンダリングを行えるため、
HUDと背景が馴染み、THRotatorよりもきれいなレンダリングに仕上がります。


内容
======================

.. toctree::
   :maxdepth: 2

   pages/install
   pages/usage
   pages/troubleshoot
   pages/development
   pages/uninstall
   pages/releasenotes
