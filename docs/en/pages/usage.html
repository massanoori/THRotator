

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to use &mdash; THRotator 1.3.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="THRotator 1.3.0 documentation" href="../index.html"/>
        <link rel="next" title="Troubleshoot" href="troubleshoot.html"/>
        <link rel="prev" title="Install" href="install.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> THRotator
          

          
          </a>

          
            
            
              <div class="version">
                1.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to use</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#rotate-a-screen">Rotate a screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="#screen-capture-on-th06">Screen capture on Th06</a></li>
<li class="toctree-l2"><a class="reference internal" href="#force-hud-rearrangements">Force HUD rearrangements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#customization-window">Customization window</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#game-state">1. Game state</a></li>
<li class="toctree-l3"><a class="reference internal" href="#main-screen">2. Main screen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rotation-angle">3. Rotation angle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pixel-interpolation-when-magnified">4. Pixel interpolation when magnified</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vertically-long-window">5. Vertically-long window</a></li>
<li class="toctree-l3"><a class="reference internal" href="#show-this-window-when-launched">6. Show this window when launched</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage-ui-force-vertical">7. Force HUD rearrangements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-rectangles">8. Other rectangles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hide-this-window">9. Hide this window</a></li>
<li class="toctree-l3"><a class="reference internal" href="#discard-change">10. Discard change</a></li>
<li class="toctree-l3"><a class="reference internal" href="#apply">11. Apply</a></li>
<li class="toctree-l3"><a class="reference internal" href="#best-practices">Best practices</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshoot.html">Troubleshoot</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="uninstall.html">Uninstall</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">THRotator</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>How to use</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/pages/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-use">
<h1>How to use<a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h1>
<div class="section" id="rotate-a-screen">
<h2>Rotate a screen<a class="headerlink" href="#rotate-a-screen" title="Permalink to this headline">¶</a></h2>
<p>By pressing <code class="docutils literal"><span class="pre">Alt+Left</span></code> or <code class="docutils literal"><span class="pre">Alt+Right</span></code>, the screen is rotated by 90 degrees in left or right direction.
When entire screen aspect ratio, seen from rotated screen viewpoint, is smaller than the original,
THRotator tries to magnify main screen region to as large size as possible while you are playing or watching replay data.</p>
</div>
<div class="section" id="screen-capture-on-th06">
<h2>Screen capture on Th06<a class="headerlink" href="#screen-capture-on-th06" title="Permalink to this headline">¶</a></h2>
<p>THRotator allows to capture a screen into a .bmp file by pressing <code class="docutils literal"><span class="pre">Home</span></code> key on Th06,
which is unsupported on the original Th06.</p>
<p>The destination is <code class="docutils literal"><span class="pre">snapshot</span></code> folder in the installed directory,
which is the same as that since Th07 until Th12.</p>
</div>
<div class="section" id="force-hud-rearrangements">
<span id="usage-force-vertical"></span><h2>Force HUD rearrangements<a class="headerlink" href="#force-hud-rearrangements" title="Permalink to this headline">¶</a></h2>
<p>HUD rearrangements for vertical screen are forced with <code class="docutils literal"><span class="pre">Alt+Up</span></code> and <code class="docutils literal"><span class="pre">Alt+Down</span></code> keys.
This option is useful when you want to manually switch to HUD arrangements for vertically-long screen.</p>
<p>THRotator detects whether you are playing or not by the criterion described in <a class="reference internal" href="#usage-state-detection"><span class="std std-ref">1. Game state</span></a>.
If you would like to use THRotator on a newer Touhou Project game or a game other than Touhou Project
on which this detection methodology doesn’t work,
use this feature or manipulate on the cutomization window, as described in <a class="reference internal" href="#usage-ui-force-vertical"><span class="std std-ref">7. Force HUD rearrangements</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This config is not saved to <code class="docutils literal"><span class="pre">throt.ini</span></code> due to its strong effect.</p>
</div>
</div>
<div class="section" id="customization-window">
<h2>Customization window<a class="headerlink" href="#customization-window" title="Permalink to this headline">¶</a></h2>
<p>Right click on the title bar, and click <code class="docutils literal"><span class="pre">Show</span> <span class="pre">THRotator</span> <span class="pre">window</span></code> or <code class="docutils literal"><span class="pre">Open</span> <span class="pre">THRotator</span></code> to show the customization window.
The customization window looks like as follows:</p>
<img alt="../_images/custom_en.png" src="../_images/custom_en.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On Direct3D 9 version, the game proceeds as usual while this window is shown.
On Direct3D 8 version, the game is suspended while this window is shown.</p>
</div>
<div class="section" id="game-state">
<span id="usage-state-detection"></span><h3>1. Game state<a class="headerlink" href="#game-state" title="Permalink to this headline">¶</a></h3>
<p>THRotator detects by counting setting viewport whether you are playing (we call it playing state) or not.
In Touhou Project, viewport is updated more frequently while playing state than otherwise.
THRotator exploits this fact to automatically switch to an HUD arrangement for vertically-long screen.</p>
<p>By clicking <code class="docutils literal"><span class="pre">Count</span> <span class="pre">SetViewport()</span></code> button, you can measure the number of times of setting viewport.
If number of times of setting viewport is more than the threshold, HUD elements are arranged for vertically-long screen.</p>
<p>If THRotator fails to read <code class="docutils literal"><span class="pre">throt.ini</span></code>, the threshold is set to 999 by default to prevent unintentional switching.</p>
<p>If you would like to use THRotator on a newer Touhou Project game or a game other than Touhou Project
on which this detection methodology doesn’t work,
follow <a class="reference internal" href="#usage-force-vertical"><span class="std std-ref">Force HUD rearrangements</span></a> or manipulate on the cutomization window, as described in <a class="reference internal" href="#usage-ui-force-vertical"><span class="std std-ref">7. Force HUD rearrangements</span></a>.</p>
</div>
<div class="section" id="main-screen">
<h3>2. Main screen<a class="headerlink" href="#main-screen" title="Permalink to this headline">¶</a></h3>
<p>Specifying main screen position and size (blue rectangle in the figure below).
This rectangle is moved to the center of window or of entire screen,
and magnified to fit to the client size of window or of entire screen,
keeping its aspect ratio fixed.</p>
<img alt="../_images/pr.png" src="../_images/pr.png" />
<p>In most of Touhou Project games, its position and size are (left, top, width, height)=(32, 16, 384, 448).
Exceptionally,
the position and size are (left, top, width, height)=(128, 16, 384, 448)
in Shoot the Bullet (Th095), Fairy Wars (Th128), and other spin-off games.</p>
<p>This rectangle specified here doesn’t have to correctly match the actual main screen rectangle.
In fact, some margin is introduced in .ini files for Fairy Wars (Th128) and Uwabami Breakers (alcostg)
to accommodate all the HUD elements.</p>
<p>Finally, <code class="docutils literal"><span class="pre">Offset</span></code> can be used to adjust vertical position.</p>
<p>Since Th14, you can additionally choose 960x720 and 1280x720 resolutions.
In that case, specify position, width, and height in the coordinate scaled to 640x480.</p>
</div>
<div class="section" id="rotation-angle">
<h3>3. Rotation angle<a class="headerlink" href="#rotation-angle" title="Permalink to this headline">¶</a></h3>
<p>Although you can rotate a screen by <code class="docutils literal"><span class="pre">Alt+Left</span></code> and <code class="docutils literal"><span class="pre">Alt+Right</span></code>,
this window can also be used to specify rotation angle.
The direction of rotation is counter-clockwise.</p>
<p>The default choice is 0 degrees.</p>
</div>
<div class="section" id="pixel-interpolation-when-magnified">
<h3>4. Pixel interpolation when magnified<a class="headerlink" href="#pixel-interpolation-when-magnified" title="Permalink to this headline">¶</a></h3>
<p>Specifying how pixel colors are interpolated when magnified.</p>
<p>The default choice is bilinear.</p>
</div>
<div class="section" id="vertically-long-window">
<h3>5. Vertically-long window<a class="headerlink" href="#vertically-long-window" title="Permalink to this headline">¶</a></h3>
<p>If checked, the window size becomes vertically-long by swapping its width and height.</p>
<p>This checkbox is unchecked by default.</p>
</div>
<div class="section" id="show-this-window-when-launched">
<h3>6. Show this window when launched<a class="headerlink" href="#show-this-window-when-launched" title="Permalink to this headline">¶</a></h3>
<p>If checked, this window appears immediately after the game is launched.</p>
<p>This checkbox is unchecked by default.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This option is unavailable on Direct3D 8 version since main game window and customization window are not coexistent.</p>
</div>
</div>
<div class="section" id="usage-ui-force-vertical">
<span id="id1"></span><h3>7. Force HUD rearrangements<a class="headerlink" href="#usage-ui-force-vertical" title="Permalink to this headline">¶</a></h3>
<p>If checked, HUD rearrangements are forced.
This option can also be switched with <code class="docutils literal"><span class="pre">Alt+Up</span></code> and <code class="docutils literal"><span class="pre">Alt+Down</span></code> when the main window is focused on.</p>
<p>This checkbox is unchecked by default.</p>
<p>THRotator detects whether you are playing or not by the criterion described in <a class="reference internal" href="#usage-state-detection"><span class="std std-ref">1. Game state</span></a>.
If you would like to use THRotator on a newer Touhou Project game or a game other than Touhou Project
on which this detection methodology doesn’t work,
manipulate on this checkbox or follow <a class="reference internal" href="#usage-force-vertical"><span class="std std-ref">Force HUD rearrangements</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This config is not saved to <code class="docutils literal"><span class="pre">throt.ini</span></code> due to its strong effect.</p>
</div>
</div>
<div class="section" id="other-rectangles">
<h3>8. Other rectangles<a class="headerlink" href="#other-rectangles" title="Permalink to this headline">¶</a></h3>
<p>Specifying source and destination rectangles other than main screen.
To create a new rectangle transfer, click <code class="docutils literal"><span class="pre">Add</span></code> button,
then rectangle editing window appears.
To edit an existing rectangle transfer, select the name of rectangle transfer and click <code class="docutils literal"><span class="pre">Edit</span></code>,
then rectangle editing window appears.</p>
<p>Rectangles are transferred from top to bottom in the list view.
So the bottommost transfer is rendered in front of all the other transfers.</p>
<p>Coordinate system is as follows,
where Wp and Hp are width and height of main screen size that is fit to the aspect ratio inverted from the original.</p>
<img alt="../_images/cs.png" src="../_images/cs.png" />
<p>Since 1.01, rectangle transfer destination can reach the remaining black stripe regions.</p>
<p>Since Th14, you can additionally choose 960x720 and 1280x720 resolutions.
In these resolutions, specify position, width, and height in the coordinate scaled to 640x480.</p>
</div>
<div class="section" id="hide-this-window">
<h3>9. Hide this window<a class="headerlink" href="#hide-this-window" title="Permalink to this headline">¶</a></h3>
<p>Closing this window.</p>
</div>
<div class="section" id="discard-change">
<h3>10. Discard change<a class="headerlink" href="#discard-change" title="Permalink to this headline">¶</a></h3>
<p>Resetting to the parameters when <code class="docutils literal"><span class="pre">Apply</span></code> was pressed last time.</p>
</div>
<div class="section" id="apply">
<h3>11. Apply<a class="headerlink" href="#apply" title="Permalink to this headline">¶</a></h3>
<p>Applying input parameters to actual rendering.
When successful, config file <code class="docutils literal"><span class="pre">throt.ini</span></code> is saved.</p>
</div>
<div class="section" id="best-practices">
<h3>Best practices<a class="headerlink" href="#best-practices" title="Permalink to this headline">¶</a></h3>
<p>Although this page describes the detailed behavior,
it is much easier to understand the behavior by actually editing parameters.</p>
<p>Procedure to support a new product looks like as follows:</p>
<ol class="arabic simple">
<li>Measure times of setting viewport in playing state and non-playing state respectively,
determine a value larger than that in non-playing state and smaller than or equal to that in playing state,
and fill the threshold by that value.<ul>
<li>Please measure this value while challenging a spell card since it generally becomes fewer.</li>
</ul>
</li>
<li>Fill main screen position and size.</li>
<li>Add rectangle transfers for the scores, lives, and other HUD elements.</li>
</ol>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="troubleshoot.html" class="btn btn-neutral float-right" title="Troubleshoot" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral" title="Install" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, massanoori.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>