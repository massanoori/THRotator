================
インストール方法
================

このページでは、インストール方法を説明します。

THRotatorのダウンロード
============================

`<https://github.com/massanoori/THRotator/releases>`_ から最新のバージョンをダウンロードします。
``Latest release`` が付いているのが最新バージョンです。
``THRotator_X_Y_Z.zip`` というような名前の付いたファイルをダウンロードしてください。


コピーするDLLファイルの確認
============================

まず、インストール先の作品が、Direct3D 8で動作するのか、Direct3D 9で動作するのかをチェックします。

インストール先の作品が下記のいずれかの場合、Direct3D 8で動作しています。

- 東方紅魔郷
- 東方妖々夢
- 東方永夜抄
- 東方花映塚
- 東方文花帖

インストール先の作品が下記のいずれか、もしくはそれ以降にリリースされた作品の場合、Direct3D 9で動作しています。

- 東方風神録
- 東方地霊殿
- 東方星蓮船
- ダブルスポイラー
- 妖精大戦争
- 東方神霊廟
- 東方輝針城
- 弾幕アマノジャク
- 東方紺珠伝
- 東方天空璋
- 黄昏酒場

もしDirect3D 8で動作する作品で、
`DX8 to DX9 Converter <http://enbdev.com/download_convertor_dx8todx9.htm>`_ を使っていなければ、
コピーするファイルは ``d3d8/d3d8.dll`` です。

それ以外でコピーするファイルは、 ``d3d9/d3d9.dll`` です。

DLLファイルのコピー
=========================

ゲームのインストールディレクトリ(exeがあるところ)に、DLLファイルをコピーします。
管理者権限を要求された場合は、管理者権限でコピーを行ってください。


設定ファイルをコピー
=========================

作品に対応した設定ファイル ``sample-config/<ゲームの実行ファイル>.throtator`` を、次のディレクトリにコピーします。

紅魔郷、妖々夢、永夜抄、花映塚、文花帖、風神録、地霊殿、星蓮船、黄昏酒場の場合
  ゲームのインストールディレクトリ

ダブルスポイラー、妖精大戦争、神霊廟、輝針城、弾幕アマノジャク、紺珠伝、それ以降の場合
  セーブデータが保存されるディレクトリ

.. note:: セーブデータが保存されるディレクトリについて
   
   - OSがWindows Vista/7/8/10の場合
   
     - ``C:\Users\<ログインユーザ名>\AppData\Roaming\ShanghaiAlice\th<作品ナンバリング>\``

   - バッチファイルで ``set APPDATA=`` を実行した後にゲームを起動している場合
   
     - インストールディレクトリ

.. note:: 古いフォーマットからの移行

   - ``<ゲームの実行ファイル>.throtator`` はコピーしないでください。THRotatorは ``<ゲームの実行ファイル>.throtator`` を最初に読み込みます。
   - インストール済みの ``throt.ini`` をそのままにしておくか、バックアップしてある ``throt.ini`` をセーブデータが保存されるディレクトリにコピーしてください。
   - 次回のゲームの起動から、設定は ``<ゲームの実行ファイル>.throtator`` に保存されます。

ローカライズ
========================

THRotatorのGUIはデフォルトで日本語です。

``d3d8/en-US`` (``d3d8/d3d8.dll`` の場合)もしくは、 ``d3d9/en-US`` (``d3d9/d3d9.dll`` の場合)フォルダをDLLファイルと同じ場所に置くと、GUIが英語になります。



デフォルトの設定ファイルのアスペクト比について
===============================================================

下記の作品では、表示桁数等を確保するために、一部のHUD要素のアスペクト比が保存されていません。

- 東方永夜抄　～ Imperishable Night. (数値の桁をすべて表示するため)
- 東方文花帖　～ Shoot the Bullet. (数値の桁をすべて表示するため)
- ダブルスポイラー　～ 東方文花帖 (数値の桁をすべて表示するため)
- 妖精大戦争　～ 東方三月精 (パーフェクトフリーズの文字はすべて表示するため)
- 東方神霊廟以降 (かけらの分母を表示するため)

